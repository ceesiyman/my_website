<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>register</title>
    <style>
        input{
    border-bottom-style:solid;
    border-top-style:none;
    border-left-style:none;
    border-right-style:none;
    border-bottom-color:black;
    width: 8cm;
    height: 1cm;
}
:placeholder-shown{
font-size: 20px;
}
label{
    font-size: larger;
}
.mybutton{
    width: 5cm;
    height: 1cm;
    background-color: white;
}
    </style>
</head>
<body style="background-image: url('back2.jpg');">
    <nav>
        <ul>
            <li><a href="home.html"><i class="fa fa-home fa-4lg"></i>Home</a></li>
            <li><a href="about.html"><i class="fa fa-user-circle fa-lg"></i>About Me</a></li>
            <li><a href="register.html"><i class="fa fa-sign-in fa-lg"></i>Register</a></li>
            <li><a href="courses.php"><i class="fa fa-pencil fa-lg"></i>Courses</a></li>
            <li><a href="cv.php"><i class="fa fa-mortar-board fa-lg" ></i>CV</a></li>
            <li><a href="community.html"><i class="fa fa-users fa-lg"></i>Community Engagement</a></li>
            <li><a href="news.html"><i class="fa fa-newspaper-o"></i>News</a></li>
            <li><a href="library.php"><i class="fa fa-book fa-lg"></i>Library</a></li>
            <li><a href="contact.php"><i class="fa fa-address-book-o fa-lg"></i>Contacts</a></li>
            <li><a href="logout.php"><i class="fa fa-sign-out fa-lg"></i>Logout</a></li>
        </ul>
    </nav>
    <br>
    <h2>!</h2>
    <h2 align="center" style="margin-top: 3%;">Please Login</h2>
    <div class="contained" align="center">
        <form method="post" id="myform" action="login112.php">
       
            <div class="inp">
                <input type="text" id="username" name="username" placeholder="Username">
                <div class="error"></div>
            </div>

            <div class="inp">
                <input type="password" id="passwords" name="passwords" placeholder="Password" >
                <div class="error"></div>
            </div><br>

            <div >
                <input type="submit" class="mybutton" value="Login">
            </div>
    </form>
    <h3 align="center">Don't have an account?</h3><br>
    <div align="center"><a href="register.html" >sign up</a></div>
    <script>
        const form = document.getElementById('myform');
        const username = document.getElementById('username');
        const password = document.getElementById('passwords');

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            if (validateInput()) {
                form.submit();
            }
        });

        // Validation functions and error handling

        const setError = (element, message) => {
            const inputControl = element.parentElement;
            const errorDisplay = inputControl.querySelector('.error');

            errorDisplay.innerText = message;
            inputControl.classList.add('error');
            inputControl.classList.remove('success');
        };

        const setSuccess = (element) => {
            const inputControl = element.parentElement;
            const errorDisplay = inputControl.querySelector('.error');

            errorDisplay.innerText = '';
            inputControl.classList.add('success');
            inputControl.classList.remove('error');
        };

        const isAlphanum = (password) => {
            const re = /^(?=.*\d)(?=.*[A-Z])(.{10,50})$/;
            const specialCharRegex = /[!@#$%^&*(),.?":{}|<>]/;
            return re.test(password);
        };

        const validateInput = () => {
            const passwordValue = password.value.trim();
            const usernameValue = username.value.trim();

            let isValid = true;

            if(usernameValue === '') {
            setError(username, 'username is required');
            } else {
            setSuccess(username);
            }

            // Validate password
            if (passwordValue === '') {
                setError(password, 'Password is required');
                isValid = false;
            } else if (passwordValue.length < 10) {
                setError(password, 'Incorrect Password/username');
                isValid = false;
            } else if (!isAlphanum(passwordValue)) {
                setError(password, 'Incorrect Password/username');
                isValid = false;
            } else {
                setSuccess(password);
            }

            return isValid;
        };
    </script>
</body>
</html>